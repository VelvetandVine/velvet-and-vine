# Velvet and Vine - Deployment Guide

## Deploying to Vercel

This guide will help you deploy the Velvet and Vine wedding planner app to Vercel.

### Prerequisites

1. **GitHub Account**: Your project code must be on GitHub
2. **Vercel Account**: Sign up at [vercel.com](https://vercel.com)
3. **Database**: A MySQL database (e.g., from PlanetScale, AWS RDS, or DigitalOcean)

### Step 1: Push Your Code to GitHub

```bash
# Initialize git if not already done
git init

# Add all files
git add .

# Commit
git commit -m "Initial commit: Velvet and Vine wedding planner app"

# Add remote (replace with your GitHub repo URL)
git remote add origin https://github.com/YOUR_USERNAME/velvet-and-vine.git

# Push to GitHub
git branch -M main
git push -u origin main
```

### Step 2: Set Up Your Database

Choose one of these options:

**Option A: PlanetScale (Recommended)**
1. Go to [planetscale.com](https://planetscale.com)
2. Create a new database
3. Copy the connection string (MySQL format)
4. Keep this safe - you'll need it in Step 4

**Option B: AWS RDS**
1. Create a MySQL RDS instance
2. Get the connection string
3. Ensure it's publicly accessible

**Option C: DigitalOcean**
1. Create a managed MySQL database
2. Get the connection string

### Step 3: Deploy to Vercel

1. Go to [vercel.com/new](https://vercel.com/new)
2. Click "Import Git Repository"
3. Paste your GitHub repository URL
4. Click "Import"

### Step 4: Configure Environment Variables

In the Vercel dashboard, add these environment variables:

| Variable | Value | Required |
|----------|-------|----------|
| `DATABASE_URL` | Your MySQL connection string | ‚úÖ Yes |
| `JWT_SECRET` | A random secure string (e.g., generated by `openssl rand -base64 32`) | ‚úÖ Yes |
| `VITE_APP_ID` | Your OAuth app ID | ‚úÖ Yes |
| `OAUTH_SERVER_URL` | `https://api.manus.im` | ‚ùå No |
| `VITE_OAUTH_PORTAL_URL` | `https://oauth.manus.im` | ‚ùå No |
| `OWNER_OPEN_ID` | Your OAuth ID | ‚ùå No |
| `OWNER_NAME` | Your name | ‚ùå No |

### Step 5: Deploy

1. Click "Deploy"
2. Wait for the build to complete (usually 2-5 minutes)
3. Once deployed, you'll get a URL like `https://velvet-and-vine.vercel.app`

### Step 6: Run Database Migrations

After deployment, you need to set up the database schema:

```bash
# From your local machine
DATABASE_URL="your_connection_string" pnpm db:push
```

### Troubleshooting

**Build fails with "Cannot find module"**
- Make sure all dependencies are in `package.json`
- Run `pnpm install` locally and commit `pnpm-lock.yaml`

**Database connection error**
- Verify `DATABASE_URL` is correct
- Check if your database is publicly accessible
- Ensure the database user has proper permissions

**OAuth not working**
- Verify `VITE_APP_ID` is correct
- Check that OAuth redirect URLs are configured correctly

### Custom Domain

To use a custom domain:

1. In Vercel dashboard, go to your project
2. Click "Settings" ‚Üí "Domains"
3. Add your custom domain
4. Follow DNS configuration instructions

### Support

For issues with:
- **Vercel**: Visit [vercel.com/support](https://vercel.com/support)
- **Your app**: Check the Vercel logs in the dashboard
- **Database**: Consult your database provider's documentation

---

**Your app is now live!** üéâ

Visit your Vercel URL to access Velvet and Vine.
